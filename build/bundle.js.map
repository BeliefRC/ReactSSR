{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.js","webpack:///./src/Routers.js","webpack:///./src/client/request.js","webpack:///./src/components/Header/index.js","webpack:///./src/components/Header/store/actions.js","webpack:///./src/components/Header/store/constants.js","webpack:///./src/components/Header/store/index.js","webpack:///./src/components/Header/store/reducer.js","webpack:///./src/containers/Home/index.js","webpack:///./src/containers/Home/store/actions.js","webpack:///./src/containers/Home/store/constants.js","webpack:///./src/containers/Home/store/index.js","webpack:///./src/containers/Home/store/reducer.js","webpack:///./src/containers/Login/index.js","webpack:///./src/server/index.js","webpack:///./src/server/request.js","webpack:///./src/server/utils.js","webpack:///./src/store/index.js","webpack:///external \"axios\"","webpack:///external \"express\"","webpack:///external \"express-http-proxy\"","webpack:///external \"react\"","webpack:///external \"react-dom/server\"","webpack:///external \"react-redux\"","webpack:///external \"react-router-config\"","webpack:///external \"react-router-dom\"","webpack:///external \"redux\"","webpack:///external \"redux-thunk\""],"names":["App","renderRoutes","props","route","routes","Component","loadData","store","dispatch","actions","getHeaderInfo","path","component","key","Home","exact","Login","instance","axios","create","baseURL","Header","connect","state","login","header","handleLogin","handleLogout","logout","console","log","changeLogin","value","type","CHANGE_LOGIN","getState","request","get","then","res","data","defaultState","action","mapDispatchToProps","getHomeList","list","home","newsList","getList","map","item","id","title","length","alert","changeList","CHANGE_LIST","app","express","use","static","proxy","proxyReqPathResolver","req","url","getStore","matchedRoutes","matchRoutes","promises","forEach","push","Promise","all","send","render","server","listen","headers","cookie","content","renderToString","JSON","stringify","reducer","combineReducers","homeReducer","HeaderReducer","createStore","applyMiddleware","thunk","withExtraArgument","serverAxios","getClientStore","defaultStore","window","context","clientAxios"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/server/index.js\");\n","import React, { Component, Fragment } from 'react'\r\nimport Index from './components/Header'\r\nimport { renderRoutes } from 'react-router-config'\r\nimport { actions } from './components/Header/store'\r\n\r\nexport default class App extends Component {\r\n  static loadData = store => {\r\n    return store.dispatch(actions.getHeaderInfo())\r\n  }\r\n\r\n  render () {\r\n    return <Fragment>\r\n      <Index/>\r\n      {renderRoutes(this.props.route.routes)}\r\n    </Fragment>\r\n  }\r\n}\r\n","import React from 'react'\r\nimport Home from './containers/Home'\r\nimport Login from './containers/Login'\r\nimport App from './App'\r\n\r\nexport default [\r\n  {\r\n    path: '/',\r\n    component: App,\r\n    loadData: App.loadData,\r\n    routes: [\r\n      {\r\n        path: '/',\r\n        key: 'home',\r\n        component: Home,\r\n        exact: true,\r\n        loadData: Home.loadData\r\n      },\r\n      {\r\n        path: '/login',\r\n        key: 'login',\r\n        component: Login,\r\n        exact: true,\r\n        // loadData: Login.loadData()\r\n      },\r\n    ]\r\n  },\r\n]\r\n","import axios from 'axios'\r\n\r\nconst instance=axios.create({\r\n  baseURL:'/'\r\n})\r\nexport default instance","import React, { Component, Fragment } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\nimport { actions } from './store'\r\n\r\n@connect(\r\n  state => ({\r\n    login: state.header.login\r\n  }),\r\n  dispatch => ({\r\n    handleLogin () {\r\n      dispatch(actions.login())\r\n    },\r\n    handleLogout () {\r\n      dispatch(actions.logout())\r\n\r\n    }\r\n  })\r\n)\r\nexport default class Header extends Component {\r\n\r\n  render () {\r\n    const {login, handleLogin, handleLogout} = this.props\r\n    console.log(login)\r\n    return <header>\r\n      <Link to='/'>首页</Link>\r\n      <br/>\r\n      {login ? <Fragment>\r\n        <Link to='/login'>翻译列表</Link>\r\n        <br/>\r\n        <div onClick={handleLogout}>退出</div>\r\n      </Fragment> : <div onClick={handleLogin}>登录</div>}\r\n      <hr/>\r\n    </header>\r\n  }\r\n}\r\n","import { CHANGE_LOGIN } from './constants'\r\n\r\nconst changeLogin = (value) => ({\r\n  type: CHANGE_LOGIN,\r\n  value\r\n})\r\n\r\n\r\nexport const login = () => {\r\n  return (dispatch, getState, request) => {\r\n    return request.get('/api/login')\r\n      .then(res => {\r\n        dispatch(changeLogin(true))\r\n      })\r\n  }\r\n}\r\nexport const logout = () => {\r\n  return (dispatch, getState, request) => {\r\n    return request.get('/api/logout')\r\n      .then(res => {\r\n        dispatch(changeLogin(false))\r\n      })\r\n  }\r\n}\r\n\r\nexport const getHeaderInfo = () => {\r\n  return (dispatch, getState, request) => {\r\n    return request.get('/api/isLogin')\r\n      .then(res => {\r\n        dispatch(changeLogin(res.data.data.login))\r\n      })\r\n  }\r\n}\r\n","export const CHANGE_LOGIN='HEADER/CHANGE_LOGIN'\r\n","import reducer from './reducer'\r\nimport * as actions from './actions'\r\n\r\nexport { reducer, actions }\r\n","import { CHANGE_LOGIN } from './constants'\r\n\r\nconst defaultState = {\r\n  login: false\r\n}\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_LOGIN:\r\n      return {\r\n        ...state,\r\n        login: action.value\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getHomeList } from './store/actions'\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n  getHomeList () {\r\n    dispatch(getHomeList())\r\n  }\r\n})\r\n@connect((state) => ({\r\n    list: state.home.newsList\r\n  }),\r\n  mapDispatchToProps)\r\nexport default class Home extends Component {\r\n  // 服务端渲染时，把store里的数据加载好\r\n  static loadData = (store) => {\r\n    return store.dispatch(getHomeList())\r\n  }\r\n\r\n  componentDidMount () {\r\n    if (!this.props.list.length) {\r\n      this.props.getHomeList()\r\n    }\r\n  }\r\n\r\n  getList = () => {\r\n    const {list} = this.props\r\n    return list.map(item => <div key={item.id}>\r\n      {item.title}\r\n    </div>)\r\n  }\r\n\r\n  render () {\r\n    return <div>\r\n      {this.getList()}\r\n      <button onClick={() => {alert('click')}}>click</button>\r\n    </div>\r\n  }\r\n}\r\n","import { CHANGE_LIST } from './constants'\r\n\r\nconst changeList = (list) => ({\r\n  type: CHANGE_LIST,\r\n  list\r\n})\r\nexport const getHomeList = () => {\r\n  return (dispatch, getState, request) => {\r\n    return request.get('/api/news.json')\r\n      .then(res => {\r\n        const list = res.data.data\r\n        dispatch(changeList(list))\r\n      })\r\n  }\r\n}\r\n","export const CHANGE_LIST='HOME/CHANGE_LIST'\r\n","import reducer from './reducer'\r\n\r\nexport { reducer }\r\n","import {CHANGE_LIST} from './constants'\r\nconst defaultState = {\r\n  newsList: []\r\n}\r\nexport default (state = defaultState, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_LIST:\r\n      return {\r\n        ...state,\r\n        newsList: action.list\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\n\r\nexport default class Login extends Component {\r\n  render () {\r\n    return <Fragment>\r\n      Login\r\n    </Fragment>\r\n  }\r\n}\r\n","import express from 'express'\r\nimport proxy from 'express-http-proxy'\r\nimport { matchRoutes } from 'react-router-config'\r\nimport { render } from './utils'\r\nimport { getStore } from '../store'\r\nimport routes from '../Routers'\r\n\r\nconst app = express()\r\napp.use(express.static('public'))\r\napp.use('/api', proxy('http://localhost:8080', {\r\n  proxyReqPathResolver: function (req) {\r\n    return `/ssr/api${req.url}`\r\n  }\r\n}))\r\napp.get('*', (req, res) => {\r\n  const store = getStore(req)\r\n  // 根据路由路径，在store中添加数据\r\n  const matchedRoutes = matchRoutes(routes, req.path)\r\n  const promises = []\r\n  matchedRoutes.forEach(item => {\r\n    if (item.route.loadData) {\r\n      promises.push(item.route.loadData(store))\r\n    }\r\n  })\r\n  Promise.all(promises)\r\n    .then(() => {\r\n  res.send(render(store, routes, req))\r\n  })\r\n\r\n})\r\nconst server = app.listen(3000, () => {\r\n  console.log(`server start at port 3000`)\r\n})\r\n","import axios from 'axios'\r\n\r\nconst instance = req => axios.create({\r\n  baseURL: 'http://localhost:8080/ssr',\r\n  headers: {\r\n    cookie: req.get('cookie') || ''\r\n  }\r\n})\r\nexport default instance","import React, { Fragment } from 'react'\r\nimport { renderToString } from 'react-dom/server'\r\nimport { StaticRouter, Route } from 'react-router-dom'\r\nimport {renderRoutes} from 'react-router-config'\r\nimport { Provider } from 'react-redux'\r\n\r\nexport const render = (store, routes, req) => {\r\n\r\n  const content = renderToString(\r\n    <Provider store={store}>\r\n      <StaticRouter location={req.path} context={{}}>\r\n        <Fragment>\r\n          {renderRoutes(routes)}\r\n        </Fragment>\r\n      </StaticRouter>\r\n    </Provider>\r\n  )\r\n  return `<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <title>ssr</title>\r\n</head>\r\n<body>\r\n    <div id=\"root\">${content}</div>\r\n    <script >\r\n    window.context={\r\n      state:${JSON.stringify(store.getState())}\r\n    }\r\n</script>\r\n    <script src=\"index.js\"></script>\r\n</body>\r\n</html>\r\n`\r\n\r\n}\r\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { reducer as homeReducer } from '../containers/Home/store'\r\nimport { reducer as HeaderReducer } from '../components/Header/store'\r\nimport clientAxios from '../client/request'\r\nimport serverAxios from '../server/request'\r\n\r\nconst reducer = combineReducers({\r\n  home: homeReducer,\r\n  header: HeaderReducer,\r\n})\r\n\r\nexport const getStore = req => createStore(reducer, applyMiddleware(thunk.withExtraArgument(serverAxios(req))))\r\nexport const getClientStore = () => {\r\n  const defaultStore = window.context.state\r\n  return createStore(reducer, defaultStore, applyMiddleware(thunk.withExtraArgument(clientAxios)))\r\n}\r\n\r\n\r\n","module.exports = require(\"axios\");","module.exports = require(\"express\");","module.exports = require(\"express-http-proxy\");","module.exports = require(\"react\");","module.exports = require(\"react-dom/server\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-router-config\");","module.exports = require(\"react-router-dom\");","module.exports = require(\"redux\");","module.exports = require(\"redux-thunk\");"],"sourceRoot":""}